"use strict";function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}_setPrototypeOf(subClass.prototype,superClass&&superClass.prototype);if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.getPrototypeOf||function _getPrototypeOf(o){return o.__proto__};return _getPrototypeOf(o)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _instanceof(left,right){if(right!=null&&typeof Symbol!=="undefined"&&right[Symbol.hasInstance]){return right[Symbol.hasInstance](left)}else{return left instanceof right}}function _classCallCheck(instance,Constructor){if(!_instanceof(instance,Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}window.config={content:"<!DOCTYPE html><html><head><meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/><meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1\"><title>SMAdFactory</title><style>html {\n    height: 100%;\n    min-height: 100%;\n}\n\nbody {\n    background: transparent;\n    margin: 0;\n    transform-origin: top left;\n    height: 100%;\n    min-height: 100%;\n}body, div, span, a, p, li {\n    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n}\n\n*, *::after, *::before {\n    box-sizing: border-box;\n}\n\np {\n    margin: 0;\n}\n\niframe {\n    border: 0 !important;\n}\n\n.loading-start {\n    height: 360px;\n    width: 640px;\n    position: absolute;\n    top: 0;\n    left: 0;\n    background: #f2f2f2;\n    z-index: 999;\n}.started .loading-start {\n    display: none;\n}\n\na.sm_adf_tracker {\n    color: #555;\n    text-decoration: none;\n}\n\n.sm_adf_sound {\n    width: 6%;\n    height: 8%;\n    min-width: 24px;\n    min-height: 24px;\n    max-width: 30px;\n    max-height: 30px;\n    left: 1.5%;\n    top: 5%;\n    position: absolute;\n    float: none;\n    cursor: pointer;\n    background-size: contain;\n    background-image: url(https://static.sunmedia.tv/SMSdk/ico/sound-on.png);\n    background-repeat: no-repeat;\n    z-index: 999;\n    display: none;\n}\n\n.sm_adf_sound.off {\n    background-image: url(https://static.sunmedia.tv/SMSdk/ico/sound-off.png);\n}</style></head><body id=\"sm_adf_body\" class=\"type-video\"><div id=\"ad-container\"><div id=\"ad-resize\"></div></div><span id='sm_adf_sound' class=\"sm_adf_sound\" onclick=\"toggleMute()\"></span><script>document.addEventListener('slide', function (evt) {\n    if (SMAdController) SMAdController.slideEventFired(evt);\n});function hasClass(selector, element) {\n    return ((\" \" + element.className + \" \").replace(/[\\n\\t]/g, \" \").indexOf(\" \" + selector + \" \") > -1);\n}\n\nwindow.getCreativeElementById = function getCreativeElementById(elementId) {\n    var newElementId = null;\n    if (elementId.indexOf('sm_adf_cmp_') === -1) {\n        newElementId = 'sm_adf_cmp_' + elementId;\n    }\n\n    return document.getElementById(newElementId) || document.getElementById('sm_adf_yt_' + elementId) || document.getElementById('sm_adf_slider_' + elementId);\n};\n\nvar SMAdController = null; //vpaid.js callback\nvar animManager = {};//animation object\nvar mainMedia = null;//busca y setea e callback de vpaid.js\nif (window.parent && window.parent.SMAdController) {\n    SMAdController = window.parent.SMAdController;\n} else {\n    try {\n        var iframes = window.parent.document.getElementsByTagName('iframe');\n        for (var i = 0; i <= iframes.length; i++) {\n            if (iframes[i] && iframes[i].contentWindow.SMAdController) {\n                SMAdController = iframes[i].contentWindow.SMAdController;\n            }\n        }\n    } catch (e) {\n    }\n}\n\n//fire creative trackers\nwindow.track = function track(tracker) {\n    if (SMAdController) SMAdController.sendTracker(tracker);\n};\n//fire creative trackers\nwindow.generateTrack = function generateTrack(componentId, itemId) {\n    if (SMAdController) SMAdController.generateUrlTracking('clk', {componentId: componentId, itemId: itemId});\n};\n\nwindow.trackClick = function (componentId, itemId, isMainClick) {\n    if (SMAdController) {\n        var trackerUrl = SMAdController.generateUrlTracking('clk', {componentId: componentId, itemId: itemId});\n        SMAdController.sendTracker(trackerUrl);\n        if (isMainClick) SMAdController.clickTracker();\n    }\n};\n\nwindow.getWindowsReferences = function getWindowsReferences() {\n    var windowReference = window;\n    var previousWindowReference = window;\n    try {\n        while (windowReference !== windowReference.parent) {\n            previousWindowReference = windowReference;\n            windowReference = windowReference.parent.window;\n        }\n    } catch (e) {\n        console.log(e);\n    }\n\n    return {\n        previousWindowReference: previousWindowReference,\n        windowReference: windowReference\n    };\n};\n\nwindow.SMPlayerInfo = function () {\n    var windowReference = window;\n    var previousWindowReference = window;\n    var sunmediaInfo = null;\n\n    try {\n        while (windowReference !== windowReference.parent) {\n            previousWindowReference = windowReference;\n            windowReference = windowReference.parent.window;\n            if (\n                windowReference.frameElement &&\n                windowReference.frameElement.parentNode &&\n                windowReference.frameElement.parentNode.id.indexOf('SMIn') > -1\n            ) {\n                var id = windowReference.frameElement.parentNode.id;\n                var type = id.split('_')[0];\n                var api = id.split('_')[1];\n                sunmediaInfo = {\n                    id: windowReference.frameElement.parentNode.id,\n                    type: type,\n                    api: api\n                };\n            }\n        }\n    } catch (e) {\n        console.log(e);\n    }\n\n    return sunmediaInfo;\n};\n\n//start creative called when body on load, creative id, creative duration\nwindow.startCreative = function startCreative() {\n    if (SMAdController) SMAdController.initAd(30);\n};\n\nwindow.handlerInnerActions = function (args) {\n    if (SMAdController) SMAdController.handlerInnerActions(args);\n};\n\nfunction startAd() {\n    if (SMAdController) SMAdController.startAd();\n}\n\n//play ad, called form vpaid.js\nfunction resumeAd() {\n    if (SMAdController) SMAdController.resumeAd();\n}\n\n//pause ad called from vpaid.js\nfunction pauseAd() {\n    if (SMAdController) SMAdController.pauseAd();\n}\n\nfunction muteAd() {\n    if (SMAdController) SMAdController.setAdVolume(0);\n}\n\nfunction unmuteAd() {\n    if (SMAdController) SMAdController.setAdVolume(1);\n}\n\nfunction toggleMute() {\n    if (SMAdController) SMAdController.toggleMute();\n}\n\nfunction destroyAd() {\n    SMAdController = null;\n    mainMedia = null;\n    animManager = null;\n}</script></body></html>",events:[],trackingUrl:"https://track.sunmedia.tv/?ap=smadf",duration:30,width:640,height:360,thirdPartyTrackers:[],extra:[{"bidder":"smartadserver","params":{"siteId":"281855","pageId":"1101582","formatId":"70691"}}],componentGroups:[],creativeId:"4a59e459-ad27-4fa5-9465-555fd9a60679"};var instanceAdController=null;var SMAdRenderer=function(){function SMAdRenderer(){_classCallCheck(this,SMAdRenderer)}_createClass(SMAdRenderer,null,[{key:"render",value:function render(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var adContainer=config.hasOwnProperty("adContainer")?config.adContainer:SMAdRenderer.adContainer();if(null!==adContainer){try{var iframe=SMAdRenderer.createIframe(config.width,config.height,"px");adContainer.appendChild(iframe);SMAdRenderer.addContentToIframe(iframe,config.content);return{iframe:iframe,adContainer:adContainer}}catch(error){}}return null}},{key:"adContainer",value:function adContainer(){var parentNode=document.currentScript?document.currentScript.parentNode:SMAdRenderer.getCurrentSMScript(config.creativeId).parentNode;return null!==parentNode&&1===parentNode.nodeType?parentNode:null}},{key:"createIframe",value:function createIframe(){var width=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"100";var height=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"100";var dimensionUnit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"%";var iframe=document.createElement("iframe");iframe.scrolling="no";iframe.allow="autoplay";iframe.id="SMCreativeIframe";SMAdRenderer._setStyle(iframe,width,height,dimensionUnit);return iframe}},{key:"removeIframe",value:function removeIframe(){var nodes=document.getElementById("SMCreativeIframe").parentElement.childNodes;for(var nodeIndex=nodes.length-1;nodeIndex>=0;nodeIndex--){if(nodes[nodeIndex]&&nodes[nodeIndex].parentElement){nodes[nodeIndex].parentElement.removeChild(nodes[nodeIndex])}}}},{key:"resizeIframe",value:function resizeIframe(){var iframeElement=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var width=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"100";var height=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"100";var dimensionUnit=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"%";var iframe=null!==iframeElement?iframeElement:document.getElementById("SMCreativeIframe");if(null!==iframe){SMAdRenderer._css(iframe,"width",width+dimensionUnit);SMAdRenderer._css(iframe,"height",height+dimensionUnit)}}},{key:"_setStyle",value:function _setStyle(iframe,width,height,dimensionUnit){SMAdRenderer._css(iframe,"display","block");SMAdRenderer._css(iframe,"width",width+dimensionUnit);SMAdRenderer._css(iframe,"height",height+dimensionUnit);SMAdRenderer._css(iframe,"maxWidth","100%");SMAdRenderer._css(iframe,"maxHeight","100%");SMAdRenderer._css(iframe,"position","absolute");SMAdRenderer._css(iframe,"top","0px");SMAdRenderer._css(iframe,"left","0px");SMAdRenderer._css(iframe,"border","0px")}},{key:"_css",value:function _css(iframe,attribute,value){if(null!==iframe){iframe.style[attribute]=value}}},{key:"addContentToIframe",value:function addContentToIframe(iframe,content){if(null!==iframe){try{var documentIframe=iframe.contentWindow.document;documentIframe.open().write(content);documentIframe.close()}catch(error){console.log(error)}}}},{key:"getCurrentSMScript",value:function getCurrentSMScript(creativeId){var scriptElements=document.getElementsByTagName("script");return Array.prototype.filter.call(scriptElements,function(elm){return elm.src.indexOf(creativeId)!==-1})[0]}}]);return SMAdRenderer}();var SMEvent=function(){function SMEvent(executionTime,behaviour){_classCallCheck(this,SMEvent);this._executionTime=executionTime;this._behaviour=behaviour;this._executed=false}_createClass(SMEvent,[{key:"behaviour",value:function behaviour(){return this._behaviour()}},{key:"dispatch",value:function dispatch(){this.behaviour();this._executed=true}}],[{key:"typesConstants",value:function typesConstants(){return{INITIAL_ANIMATION:"INITIAL_ANIMATION",END_ANIMATION:"END_ANIMATION",TRANSITION:"TRANSITION",INIT_MEDIA:"INIT_MEDIA",END_MEDIA:"END_MEDIA",LOAD:"load",START:"start",SHOW:"show",HIDE:"hide",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",TOUCHSTART:"touchstart",TOUCHEND:"touchend"}}}]);return SMEvent}();var SMEventManager=function(){function SMEventManager(){var removeEventsWhenDispatched=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;_classCallCheck(this,SMEventManager);this.events=[];this._currentTime=0;this._currentTimeInMilliSeconds=0;this._intervalFlag=null;this._isActive=false;this._removeEventsWhenDispatched=removeEventsWhenDispatched}_createClass(SMEventManager,[{key:"add",value:function add(event){this.events.push(event)}},{key:"_run",value:function _run(){this._dispatchEvents();this._currentTimeInMilliSeconds+=100;this._currentTime=Math.floor(this._currentTimeInMilliSeconds/1000)}},{key:"runInSecond",value:function runInSecond(second){this._currentTime=second;this._currentTimeInMilliSeconds=second*1000;this._dispatchEvents()}},{key:"_dispatchEvents",value:function _dispatchEvents(){var _self=this;var eventsAfterDispatch=_extends([],_self.events);_self.events.forEach(function(event){if(_self._currentTime===event._executionTime&&!event._executed){event.dispatch();if(true===_self._removeEventsWhenDispatched)eventsAfterDispatch.splice(eventsAfterDispatch.indexOf(event),1)}});_self.events=eventsAfterDispatch}},{key:"play",value:function play(){if(null!==this._intervalFlag)return false;var _self=this;this._updateCurrentTime();_self._intervalFlag=setInterval(function(){return _self._run()},100);this._isActive=true}},{key:"pause",value:function pause(){clearInterval(this._intervalFlag);this._intervalFlag=null}},{key:"stop",value:function stop(){this.pause();this._currentTime=0;this._currentTimeInMilliSeconds=0;this._isActive=false;this._resetExecutedFlagInEventCollection()}},{key:"currentTime",value:function currentTime(){return this._currentTime}},{key:"_updateCurrentTime",value:function _updateCurrentTime(){if(this._currentTime>0){this._currentTimeInMilliSeconds=this._currentTime*1000}else if(this._currentTimeInMilliSeconds>0){this._currentTime=Math.floor(this._currentTimeInMilliSeconds/1000)}}},{key:"_resetExecutedFlagInEventCollection",value:function _resetExecutedFlagInEventCollection(){this.events.forEach(function(event){return event._executed=false})}}]);return SMEventManager}();var SMDeviceDetection=function(){function SMDeviceDetection(){_classCallCheck(this,SMDeviceDetection)}_createClass(SMDeviceDetection,null,[{key:"isMobile",value:function isMobile(){var mobileRegExp=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i;var mobileRegExp2=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;return mobileRegExp.test(navigator.userAgent)||mobileRegExp2.test(navigator.userAgent.substr(0,4))}},{key:"isTablet",value:function isTablet(){var windowReferenceArgument=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var windowReference=null!==windowReferenceArgument?windowReferenceArgument:window;var tabletRegExp=/ipad|android|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i;return tabletRegExp.test(navigator.userAgent.toLowerCase())&&windowReference.innerWidth<=1280&&windowReference.innerHeight<=800}},{key:"isSafari",value:function isSafari(){return /^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isChrome",value:function isChrome(){return /Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}}]);return SMDeviceDetection}();var UrlUtils=function(){function UrlUtils(){_classCallCheck(this,UrlUtils)}_createClass(UrlUtils,null,[{key:"validUrl",value:function validUrl(str){return /^(?:(?:(?:https?):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(str)}},{key:"queryToObject",value:function queryToObject(query){var resultStr=decodeURIComponent(query).replace(/"/g,"\\\"").replace(/&/g,"\",\"").replace(/=/g,"\":\"");return JSON.parse("{\""+resultStr+"\"}")}}]);return UrlUtils}();var SMAdLiteVpaidController=function(){function SMAdLiteVpaidController(){_classCallCheck(this,SMAdLiteVpaidController);if(null!==instanceAdController){return instanceAdController}else{this.STATES=SMAdLiteVpaidController._statesConstants();this.AUDIO_STATES=SMAdLiteVpaidController._audioStatesConstants();this.EVENT_TYPES=SMEvent.typesConstants();this.EVENT_TRACKERS_IDENTIFIERS=SMAdLiteVpaidController._eventTrackerIdentifiers();this.debug=false;this.iframe=null;this.adContainer=null;this.adDuration=0;this.adCurrentTime=0;this._remainingTime=0;this.adWidth=0;this.adHeight=0;this.originalDimensions={width:0,height:0};this.creative=null;this.mainMedia=null;this.activeMedia=null;this.state=this.STATES.LOADING;this.audioState=this.AUDIO_STATES.MUTED;this._volume=0;this._previousVolume=0;this.autoplay=false;this.secondsInView=2;this.eventManager=new SMEventManager;this.events=[];this._checkViewabilityFlag=null;this._viewabilitySent=false;this._plugin=null;this._api=null;this._SMContainer=null;this._adVideoCompleteFired=false;this._adVideoStartFired=false;this.managerInitTimeout=null;this._animations=[];this._eventsCallbacks={};this.adLinear=true;this.adExpanded=false;this.adSkippableState=false;this.adIcons=false;this.adCompanions="";this.VIEW_MODE_OPTIONS={NORMAL:"normal",THUMBNAIL:"thumbnail",FULLSCREEN:"fullscreen"};this.viewMode=this.VIEW_MODE_OPTIONS.NORMAL;this._slot=null;this._videoSlot=null;this._adParameters=null;instanceAdController=this}}_createClass(SMAdLiteVpaidController,[{key:"handshakeVersion",value:function handshakeVersion(playerVPAIDVersion){return"2.0"}},{key:"initAd",value:function initAd(width,height,viewMode,desiredBitrate){var creativeData=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;var environmentVars=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;if(null!==environmentVars&&environmentVars.hasOwnProperty("slot")&&environmentVars.hasOwnProperty("videoSlot")&&SMAdLiteVpaidController._isSet(environmentVars.slot)&&SMAdLiteVpaidController._isSet(environmentVars.videoSlot)){this._slot=environmentVars.slot;config.adContainer=this._slot;this._videoSlot=environmentVars.videoSlot}try{if(null!==creativeData)this._adParameters=JSON.parse(creativeData["AdParameters"])}catch(error){this._adParameters=null}this.adWidth=width;this.adHeight=height;this.viewMode=viewMode;this.desiredBitrate=desiredBitrate;this.adSkippableState=true;this.setAdDuration(config.duration);this.checkExternalClick();this.checkExternalSchain();this.checkExternalTarget();this.emitCreativeInfo();this._configureAndRenderCreative(config);this._addQuartileEvents();if(this._addLastEventToEventManager)this._addLastEventToEventManager();var self=this;if(null!==this.iframe){this.creative=this.iframe.contentWindow;if(this.creative){if(this.creative.document.readyState==="loading"){this.creative.document.addEventListener("DOMContentLoaded",self.managerInit.bind(this));this.managerInitTimeout=setTimeout(self.managerInit.bind(this),2000)}else{this.managerInit()}}}else{this._emit("AdError")}}},{key:"_configureAndRenderCreative",value:function _configureAndRenderCreative(config){this.originalDimensions.width=config.width;this.originalDimensions.height=config.height;if(this.getAdHeight()>0&&this.getAdWidth()>0){config.width=this.getAdWidth();config.height=this.getAdHeight()}var iframeAndContainerReferences=SMAdRenderer.render(config);if(null!==iframeAndContainerReferences){this.iframe=iframeAndContainerReferences.iframe;this.adContainer=iframeAndContainerReferences.adContainer}this.adDuration=config.duration;this._remainingTime=config.duration}},{key:"managerInit",value:function managerInit(){this.initializeAd(config,this);clearTimeout(this.managerInitTimeout)}},{key:"initializeAd",value:function initializeAd(config,self){if(config&&config.events)self._addCreativeEventsToEventManager(config.events);self._calculateScaleBody();self._emit("AdLoaded");self.state=self.STATES.LOADED;if(self.autoplay)self.startAd()}},{key:"destroy",value:function destroy(){if(this.creative){if(this.creative.destroyAd)this.creative.destroyAd();SMAdRenderer.removeIframe();this._emit("AdClosed")}}},{key:"emitCreativeInfo",value:function emitCreativeInfo(){var eventData={provider:"SM",type:"Video"};this._emit("SMAdFactory",eventData)}},{key:"startAd",value:function startAd(){this._lazyLoadElements();this._addStartClassToBody();this._emit("AdStarted");this._emit("AdImpression");this._emit("creativeView");this.eventManager.play();this._emit("AdPlaying");this.state=this.STATES.PLAYING;this._checkViewability()}},{key:"resumeAd",value:function resumeAd(){this.eventManager.play();this._emit("AdResumed");this._emit("AdPlaying");this.state=this.STATES.PLAYING}},{key:"pauseAd",value:function pauseAd(){this.eventManager.pause();this._emit("AdPaused");this.state=this.STATES.PAUSED}},{key:"stopAd",value:function stopAd(){this.eventManager.pause();this._emit("AdComplete");this.eventManager.stop();this.state=this.STATES.STOPPED;var self=this;setTimeout(function(){self._emit("AdStopped")},1000)}},{key:"skipAd",value:function skipAd(){if(true===this.adSkippableState){this._emit("AdSkipped");this.eventManager.stop();this.destroy();var self=this;setTimeout(function(){self._emit("AdStopped")},1000)}}},{key:"setAdVolume",value:function setAdVolume(volume){this._videoSlot.volume=volume;if(volume<0)volume=0;if(volume>1)volume=1;this._previousVolume=this._volume;this._volume=volume;this.audioState=volume>0?this.AUDIO_STATES.UNMUTED:this.AUDIO_STATES.MUTED;if(this._volume===0&&this._previousVolume>0)this._emit("AdMuted");if(this._volume>0&&this._previousVolume===0)this._emit("AdUnmuted")}},{key:"getAdVolume",value:function getAdVolume(){return this._volume}},{key:"getAdWidth",value:function getAdWidth(){return this.adWidth}},{key:"getAdHeight",value:function getAdHeight(){return this.adHeight}},{key:"resizeAd",value:function resizeAd(width,height,viewMode){var dimensionUnit="px";if(this.VIEW_MODE_OPTIONS.FULLSCREEN===viewMode){width=null!==this._videoSlot?this._videoSlot.getAttribute("width"):100;height=null!==this._videoSlot?this._videoSlot.getAttribute("height"):100;dimensionUnit="%"}SMAdRenderer.resizeIframe(this.iframe,width,height,dimensionUnit);this._calculateScaleBody();this.adWidth=width;this.adHeight=height;this.viewMode=viewMode;this._emit("AdSizeChange")}},{key:"_calculateScaleBody",value:function _calculateScaleBody(){var self=this;try{var body=self.iframe.contentDocument.body;var iframeDimensions=self.iframe.getBoundingClientRect();var scale={x:iframeDimensions.width/self.originalDimensions.width*100/100,y:iframeDimensions.height/self.originalDimensions.height*100/100};var transformValue="scale(".concat(scale.x.toFixed(2),", ").concat(scale.y.toFixed(2),")");body.style.transform=transformValue;body.style.webkitTransform=transformValue;body.style.msTransform=transformValue;body.style.mozTransform=transformValue;body.style.oTransform=transformValue}catch(exception){}}},{key:"expandAd",value:function expandAd(){this.adExpanded=true}},{key:"collapseAd",value:function collapseAd(){this.adExpanded=false}},{key:"getAdExpanded",value:function getAdExpanded(){return this.adExpanded}},{key:"getAdSkippableState",value:function getAdSkippableState(){return this.adSkippableState}},{key:"getAdDuration",value:function getAdDuration(){return this.adDuration}},{key:"setAdDuration",value:function setAdDuration(duration){this.adDuration=duration}},{key:"getAdRemainingTime",value:function getAdRemainingTime(){if(this.STATES.PAUSED!==this.state){this._remainingTime=this.getAdDuration()-this.eventManager.currentTime()}return this._remainingTime}},{key:"getAdLinear",value:function getAdLinear(){return this.adLinear}},{key:"getAdCompanions",value:function getAdCompanions(){return this.adCompanions}},{key:"getAdIcons",value:function getAdIcons(){return this.adIcons}},{key:"_addQuartileEvents",value:function _addQuartileEvents(){var self=this;var duration=this.adDuration;var firstQuartileExecutionTime=Math.floor(duration*0.25);var firstQuartile=new SMEvent(firstQuartileExecutionTime,function(){self._emit("AdVideoFirstQuartile")});var midPointExecutionTime=Math.floor(duration/2);var midPoint=new SMEvent(midPointExecutionTime,function(){self._emit("AdVideoMidpoint")});var thirdQuartileExecutionTime=firstQuartileExecutionTime*3;var thirdQuartile=new SMEvent(thirdQuartileExecutionTime,function(){self._emit("AdVideoThirdQuartile")});this.eventManager.add(firstQuartile);this.eventManager.add(midPoint);this.eventManager.add(thirdQuartile)}},{key:"_addLastEventToEventManager",value:function _addLastEventToEventManager(){var self=this;var lastEvent=new SMEvent(this.adDuration,function(){self.stopAd()});this.eventManager.add(lastEvent)}},{key:"subscribe",value:function subscribe(callbackFunction,eventName,callbackContext){this._eventsCallbacks[eventName]=callbackFunction.bind(callbackContext)}},{key:"unsubscribe",value:function unsubscribe(eventName){this._eventsCallbacks[eventName]=null}},{key:"_addCreativeEventsToEventManager",value:function _addCreativeEventsToEventManager(events){var self=this;if(parseInt(this.adDuration)>=30){var customView30=new SMEvent(30,function(){self._emit("CustomView30")});this.eventManager.add(customView30)}}},{key:"_checkViewability",value:function _checkViewability(){if(true===this._viewabilitySent)return false;var timeElapsed=0;var self=this;var timeToSendViewability=10*parseInt(this.secondsInView);this._checkViewabilityFlag=setInterval(function(){timeElapsed++;var isCreativeVisible=false;var canCheckViewability=true;try{isCreativeVisible=self._isCreativeVisible()}catch(e){canCheckViewability=false}if(false===isCreativeVisible&&true===canCheckViewability){clearInterval(self._checkViewabilityFlag);self._checkViewability()}else if(timeElapsed>=timeToSendViewability&&false===self._viewabilitySent){clearInterval(self._checkViewabilityFlag);self._emit("viewability");self._viewabilitySent=true}else if(false===canCheckViewability){clearInterval(self._checkViewabilityFlag)}},100)}},{key:"_isCreativeVisible",value:function _isCreativeVisible(){var forceVisibilityByPixels=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var visibilityPixels=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var _this$creative$getWin=this.creative.getWindowsReferences(),previousWindowReference=_this$creative$getWin.previousWindowReference,windowReference=_this$creative$getWin.windowReference;var creativeIframe=previousWindowReference.frameElement;var windowScrollY=windowReference.parent.scrollY;var windowHeight=windowReference.parent.innerHeight;var adIframeHeight=creativeIframe.clientHeight;var viewTopLimit=windowScrollY+windowHeight;var iframeTop=creativeIframe.getBoundingClientRect().top+windowReference.parent.pageYOffset;var iframeMiddle=iframeTop+adIframeHeight/2;var iframeBottom=iframeTop+adIframeHeight;var firstHalfIsVisible=windowScrollY<=iframeTop&&viewTopLimit>=iframeMiddle;var secondHalfVisible=windowScrollY<=iframeMiddle&&viewTopLimit>=iframeBottom;var halfIframeVisible=windowScrollY>=iframeTop&&viewTopLimit<=iframeBottom&&viewTopLimit-windowScrollY>=adIframeHeight/2;var isVisible=firstHalfIsVisible||secondHalfVisible||halfIframeVisible;if(true===forceVisibilityByPixels){var firstPixelsIsVisible=windowScrollY<=iframeTop&&viewTopLimit>=iframeTop+visibilityPixels;var lastPixelsIsVisible=windowScrollY<=iframeBottom-visibilityPixels&&viewTopLimit>=iframeBottom;isVisible=firstHalfIsVisible||secondHalfVisible||halfIframeVisible||firstPixelsIsVisible||lastPixelsIsVisible}return isVisible}},{key:"_lazyLoadElements",value:function _lazyLoadElements(){try{var elements=this.creative.document.querySelectorAll("[data-src]");var self=this;[].forEach.call(elements,function(element){if("loaded"===element.className)return false;if(element.dataset.parent&&null!==self.adContainer){var _script=document.createElement("script");_script.src=element.dataset.src;self.adContainer.appendChild(_script)}else{element.src=element.dataset.src}element.className="loaded"})}catch(e){}}},{key:"_addStartClassToBody",value:function _addStartClassToBody(){var self=this;try{var body=self.iframe.contentDocument.body;body.classList.add("started")}catch(e){}}},{key:"SMInitialize",value:function SMInitialize(parameters){var plugin=parameters.plugin,api=parameters.api,SMContainer=parameters.SMContainer;if(plugin)this._plugin=plugin;if(api)this._api=api;if(SMContainer)this._SMContainer=SMContainer}},{key:"getQueryStringObjectFromScript",value:function getQueryStringObjectFromScript(){var script=document.currentScript?document.currentScript:SMAdRenderer.getCurrentSMScript(config.creativeId);var queryString=script.src.replace(/^[^\?]+\??/,"");return""!==queryString?UrlUtils.queryToObject(queryString):{}}},{key:"checkExternalClick",value:function checkExternalClick(){try{var queryObject=this.getQueryStringObjectFromScript();var url=queryObject&&queryObject.xclk?decodeURIComponent(queryObject.xclk):null;if(null!==url&&true===UrlUtils.validUrl(url)){config.thirdPartyTrackers.push({name:"AdClickThru",url:url})}if(null!==script&&script.dataset.xclk){var urlFromData=decodeURIComponent(script.dataset.xclk);if(null!==urlFromData&&urlFromData!==url&&true===UrlUtils.validUrl(urlFromData)){config.thirdPartyTrackers.push({name:"AdClickThru",url:urlFromData})}}}catch(e){}}},{key:"checkExternalSchain",value:function checkExternalSchain(){try{var queryObject=this.getQueryStringObjectFromScript();var schain=queryObject&&queryObject.schain?decodeURIComponent(queryObject.schain):null;if(null!==schain&&schain.toString()!=="${supply_chain}"){config.external_schain=schain.split(",")[2];config.external_schain_full=schain}else{config.external_schain=null;config.external_schain_full=null}}catch(e){}}},{key:"checkExternalTarget",value:function checkExternalTarget(){try{var queryObject=this.getQueryStringObjectFromScript();var target=queryObject&&queryObject.t?decodeURIComponent(queryObject.t):null;config.external_target=null!==target&&target.toString()!=="${VALUE}"?target:null}catch(e){}}},{key:"_emit",value:function _emit(eventName){var parameters=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(this._hasEventCallback(eventName)){if("AdClickThru"===eventName)this._eventsCallbacks[eventName]();else this._eventsCallbacks[eventName](parameters)}this.checkAndSendThirdPartyTrackers(eventName);this._emitAdFactoryTracker(eventName,parameters)}},{key:"_hasEventCallback",value:function _hasEventCallback(eventName){return Object.keys(this._eventsCallbacks).indexOf(eventName)>-1&&null!==this._eventsCallbacks[eventName]}},{key:"_emitAdFactoryTracker",value:function _emitAdFactoryTracker(eventName){var parameters=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(true===this.EVENT_TRACKERS_IDENTIFIERS.hasOwnProperty(eventName)&&!this.EVENT_TRACKERS_IDENTIFIERS[eventName].tracking){return false}var eventIdentifier=this._eventIdentifier(eventName);if(null!==eventIdentifier)eventName=eventIdentifier;var trackingUrl=this.generateUrlTracking(eventName,parameters);this.sendTracker(trackingUrl)}},{key:"checkAndSendThirdPartyTrackers",value:function checkAndSendThirdPartyTrackers(eventName){var self=this;if(config&&config.thirdPartyTrackers){config.thirdPartyTrackers.forEach(function(tracker){if(tracker.name===eventName&&""!==tracker.url){self.sendTracker(tracker.url)}})}}},{key:"clickTracker",value:function clickTracker(){this._emit("AdClickThru")}},{key:"_eventIdentifier",value:function _eventIdentifier(eventName){var eventIdentifier=null;if(true===this.EVENT_TRACKERS_IDENTIFIERS.hasOwnProperty(eventName)){eventIdentifier=this.EVENT_TRACKERS_IDENTIFIERS[eventName].id}return eventIdentifier}},{key:"sendTracker",value:function sendTracker(trackerUrl){var img=new Image;img.src=trackerUrl}},{key:"generateUrlTracking",value:function generateUrlTracking(){var event=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var parameters=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var self=this;var url=config.trackingUrl;var creative="4a59e459-ad27-4fa5-9465-555fd9a60679";url+="&ce="+creative;Object.keys(parameters).forEach(function(key){var value=parameters[key];var keyParameter=self._eventIdentifier(key);if(null===keyParameter)return false;url+="&".concat(keyParameter,"=").concat(value)});if(event)url+="&tp="+event;return url}},{key:"error",value:function error(_error){var sendTracker=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(true===sendTracker){var errorUrl=this.generateUrlTracking("err");this.sendTracker(errorUrl)}}}],[{key:"_eventTrackerIdentifiers",value:function _eventTrackerIdentifiers(){return{"impression":{id:"imp",tracking:true},"AdImpression":{id:"imp",tracking:true},"error":{id:"err",tracking:true},"AdError":{id:"err",tracking:true},"mute":{id:"mu",tracking:true},"AdMuted":{id:"mu",tracking:true},"unmute":{id:"um",tracking:true},"AdUnmuted":{id:"um",tracking:true},"pause":{id:"pa",tracking:true},"AdPaused":{id:"pa",tracking:true},"skip":{id:"sk",tracking:true},"AdSkipped":{id:"sk",tracking:true},"start":{id:"st",tracking:true},"AdStarted":{id:"st",tracking:true},"firstQuartile":{id:"fq",tracking:true},"AdVideoFirstQuartile":{id:"fq",tracking:true},"midpoint":{id:"mp",tracking:true},"AdVideoMidpoint":{id:"mp",tracking:true},"thirdQuartile":{id:"tq",tracking:true},"AdVideoThirdQuartile":{id:"tq",tracking:true},"complete":{id:"co",tracking:true},"AdComplete":{id:"co",tracking:true},"progress":{id:"pr"},"creativeView":{id:"cv",tracking:true},"close":{id:"cl",tracking:true},"AdClosed":{id:"cl",tracking:true},"viewability":{id:"vw",tracking:true},"AdClickThru":{id:"clk",tracking:true},"AdClick":{id:"clk",tracking:true},"click":{id:"clk",tracking:true},"ClickTracking":{id:"clk",tracking:true},"AdPlaying":{id:"adp",tracking:true},"AdSizeChange":{id:"asz"},"AdVideoStart":{id:"avs",tracking:true},"AdVideoComplete":{id:"avc",tracking:true},"AdLoaded":{id:"adl",tracking:true},"AdResumed":{id:"adr"},"AdStopped":{id:"ads",tracking:true},"componentId":{id:"ct"},"itemId":{id:"it"},"CustomView30":{id:"cvw",tracking:true}}}},{key:"_statesConstants",value:function _statesConstants(){return{LOADING:1,LOADED:2,PLAYING:3,PAUSED:4,STOPPED:5}}},{key:"_audioStatesConstants",value:function _audioStatesConstants(){return{MUTED:0,UNMUTED:1}}},{key:"_isSet",value:function _isSet(param){return null!==param&&"undefined"!==typeof param&&"undefined"!==param&&"null"!==param&&""!==param}}]);return SMAdLiteVpaidController}();var SMAdHeaderBiddingController=function(_SMAdLiteVpaidControl){function SMAdHeaderBiddingController(){var _this;_classCallCheck(this,SMAdHeaderBiddingController);_this=_possibleConstructorReturn(this,_getPrototypeOf(SMAdHeaderBiddingController).call(this));_this.autoplay=false;_this.adPausable=false;_this.ssploaded=false;_this.started=false;return _this}_createClass(SMAdHeaderBiddingController,[{key:"emitCreativeInfo",value:function emitCreativeInfo(){this._emit("SMAdFactory",{provider:"SM",type:"SSP"})}},{key:"startAd",value:function startAd(){var self=this;if(this.started)return;this.started=true;this._lazyLoadElements();this._addStartClassToBody();this.eventManager.play();this._checkViewability();setTimeout(function(){if(!self.ssploaded)self.noAd()},5000)}},{key:"adLoaded",value:function adLoaded(){this.ssploaded=true;var self=this;var iframe=this.iframe.contentWindow||this.iframe.contentDocument;iframe.document.body.style.margin="0";var iframeSize=this.getIframeSize();this._emit("SMAdFactorySSPVpaidSize",iframeSize);this._emit("AdStarted");this._emit("AdImpression");this._emit("creativeView");this._emit("AdPlaying");if(this.adPausable){var pausedEvent=new SMEvent(4,function(){self._emit("AdPaused")});this.eventManager.add(pausedEvent)}else{var quartile=Math.round(this.adDuration/4);var nEvent;nEvent=new SMEvent(Math.round(quartile),function(){self._emit("AdVideoFirstQuartile")});this.eventManager.add(nEvent);nEvent=new SMEvent(Math.round(quartile*2),function(){self._emit("AdVideoMidpoint")});this.eventManager.add(nEvent);nEvent=new SMEvent(Math.round(quartile*3),function(){self._emit("AdVideoThirdQuartile")});this.eventManager.add(nEvent);nEvent=new SMEvent(Math.round(this.adDuration),function(){self._emit("AdVideoComplete");self.stopAd()});this.eventManager.add(nEvent)}setTimeout(function(){self.showCloseButton()},2000)}},{key:"showCloseButton",value:function showCloseButton(){var closeButtonElement=this.createCloseButton();this.adContainer.appendChild(closeButtonElement)}},{key:"createCloseButton",value:function createCloseButton(){var closeButtonElement=document.createElement("div");var clsStyle=""+"cursor:pointer;"+"width:20px;"+"height:20px;"+"position:absolute;"+"right:10px;"+"top:10px;"+"background-image:url('https://static.sunmedia.tv/SMOutstream/files/4.1/ico-cerrar.png');"+"background-size: contain;"+"background-repeat: no-repeat;";closeButtonElement.setAttribute("id","sm_ssp_close");closeButtonElement.setAttribute("style",clsStyle);closeButtonElement.a=this;closeButtonElement.onclick=function(){this.parentNode.innerHTML="";this.a._emit("AdSkipped")};return closeButtonElement}},{key:"_addQuartileEvents",value:function _addQuartileEvents(){}},{key:"_addLastEventToEventManager",value:function _addLastEventToEventManager(){}},{key:"resizeAd",value:function resizeAd(width,height,viewMode){try{this._resizePlayerForInDisplay(width,height,viewMode);this.adWidth=width;this.adHeight=height;this.viewMode=viewMode;this._emit("AdSizeChange");this._resizeAdForInDisplay(width,height)}catch(e){}}},{key:"_resizePlayerForInDisplay",value:function _resizePlayerForInDisplay(width,height,viewMode){if(this.VIEW_MODE_OPTIONS.FULLSCREEN===viewMode){SMAdRenderer.resizeIframe(this.iframe)}else{SMAdRenderer.resizeIframe(this.iframe,width,height,"px")}}},{key:"_resizeAdForInDisplay",value:function _resizeAdForInDisplay(width,height){var iframe=this.iframe.contentWindow||this.iframe.contentDocument;var clicks=iframe.document.getElementsByTagName("a");if(clicks&&clicks.length>0){loop1:for(var i=0;i<clicks.length;i++){var images=clicks[i].getElementsByTagName("img");if(images&&images.length>0){for(var j=0;j<images.length;j++){var _height=images[j].height||0;var _width=images[j].width||0;if(_height>1&&_width>1){var isAnImage=images[j];isAnImage.style.width="100%";isAnImage.style.height="100%";isAnImage.width="100%";isAnImage.height="100%";break loop1}}}}}var sas=iframe.document.getElementById("sas_70691");if(sas){var iframeElement=sas.getElementsByTagName("iframe");var iframeSize=this.getIframeSize();var scaleX=100*width/iframeSize.w/100;var scaleY=100*height/iframeSize.h/100;if(iframeElement&&iframeElement.length>0){for(var f=0;f<iframeElement.length;f++){iframeElement[f].style.width=iframeSize.w+"px";iframeElement[f].style.height=iframeSize.h+"px";iframeElement[f].style.transform="scale("+scaleX+", "+scaleY+")";iframeElement[f].style.transformOrigin="0 0";iframeElement[f].style.position="absolute"}}}}},{key:"getIframeSize",value:function getIframeSize(){var iframe=this.iframe.contentWindow||this.iframe.contentDocument;var sas=iframe.document.getElementById("sas_70691");if(sas){var iframeElement=sas.getElementsByTagName("iframe")[0];if(iframeElement){return{w:parseInt(iframeElement.width,10)||null,h:parseInt(iframeElement.height,10)||null}}}return null}},{key:"_calculateScaleBody",value:function _calculateScaleBody(){}},{key:"noAd",value:function noAd(){var adControllerFromWindow=window.SMAdController;try{if(adControllerFromWindow.startTimeout)clearTimeout(adControllerFromWindow.startTimeout)}catch(e){}adControllerFromWindow._emit("AdError")}},{key:"_lazyLoadElements",value:function _lazyLoadElements(){if(config.external_schain)window.external_schain=config.external_schain;if(config.external_target)window.external_target=config.external_target;new HeaderBiddingComponent(this.iframe.contentDocument).createScript()}}]);_inherits(SMAdHeaderBiddingController,_SMAdLiteVpaidControl);return SMAdHeaderBiddingController}(SMAdLiteVpaidController);var SMAdSspController=function(_SMAdHeaderBiddingCon){function SMAdSspController(){_classCallCheck(this,SMAdSspController);return _possibleConstructorReturn(this,_getPrototypeOf(SMAdSspController).call(this))}_createClass(SMAdSspController,[{key:"_lazyLoadElements",value:function _lazyLoadElements(){if(config.external_schain)window.external_schain=config.external_schain;this._loadScriptDisplaySSP()}},{key:"_loadScriptDisplaySSP",value:function _loadScriptDisplaySSP(){var iframe=this.iframe.contentWindow||this.iframe.contentDocument;if(iframe.document.body&&config.extra){var d=config.extra[0];if(d){this["_"+d.bidder.toLowerCase()]()}}}},{key:"_smartadserver",value:function _smartadserver(){var d=config.extra[0];if(d){var iframe=this.iframe.contentWindow||this.iframe.contentDocument;var dv=document.createElement("div");dv.id="sas_70691";iframe.document.body.appendChild(dv);var smt=document.createElement("script");smt.type="application/javascript";smt.src="https://ced.sascdn.com/tag/1999/smart.js";smt.async=true;iframe.document.body.appendChild(smt);var schain_full="";if(config.external_schain_full)schain_full=config.external_schain_full;var target="";if(config.external_target)target=config.external_target;if(target&&target.indexOf(",")>-1){var re=new RegExp(",","g");target=target.replace(re,";")}var smtb=document.createElement("script");smtb.type="application/javascript";smtb.text="var sas = sas || {};"+"sas.cmd = sas.cmd || [];"+"sas.cmd.push("+"function () {"+"sas.call("+"{ siteId: "+d.params.siteId+", pageId: "+d.params.pageId+", formatId: "+d.params.formatId+", tagId: \"sas_70691\", target:\""+target+"\", schain:\""+schain_full+"\" },"+"{ networkId: 1999, domain: \"//www8.smartadserver.com\", onNoad: "+window.SMAdController.noAd+" }"+");"+"}"+");";iframe.document.body.appendChild(smtb)}}},{key:"setIAS",value:function setIAS(url){try{if(url){var iframe=this.iframe.contentWindow||this.iframe.contentDocument;var ias_script=document.createElement("script");ias_script.src=url;iframe.document.body.appendChild(ias_script)}}catch(e){}}},{key:"_isInDisplayScroller",value:function _isInDisplayScroller(doc){var iframes=doc.getElementsByTagName("iframe"),sasIframe;if(iframes&&iframes.length>0){for(var i=0;i<iframes.length;i++){if(iframes[i]&&iframes[i].id&&iframes[i].id.indexOf("sas_")>-1){sasIframe=iframes[i];break}}}if(sasIframe){var images=sasIframe.contentWindow.document.getElementsByTagName("img");if(images&&images.length>0){for(var j=0;j<images.length;j++){var height=images[j].height||0;var width=images[j].width||0;if(width===640&&height===1450)return images[j]}}}return false}},{key:"_parallax",value:function _parallax(image){this._parallaxes=[];var _this$creative$getWin2=this.creative.getWindowsReferences(),previousWindowReference=_this$creative$getWin2.previousWindowReference,windowReference=_this$creative$getWin2.windowReference;var images=[image];var self=this;var container=self._SMContainer;if(!container){container=this.adContainer}Array.prototype.forEach.call(images,function(image){var newParallax=self.updateParallax(image,container,windowReference.parent);if(null===newParallax)return;newParallax.container=container;newParallax.window=windowReference.parent;self._parallaxes.push(newParallax)});var callback=function callback(){return self._parallaxes.forEach(function(parallax){self.updateParallax(parallax,parallax.container,parallax.window,false)})};windowReference.parent.addEventListener("loaded",callback);windowReference.parent.addEventListener("DOMContentLoaded",callback);windowReference.parent.addEventListener("resize",callback)}},{key:"_getStackedOffsetLeft",value:function _getStackedOffsetLeft(container){var offsetLeft=0;var element=container;while(element.offsetParent){offsetLeft+=element.offsetLeft;element=element.offsetParent}return offsetLeft}},{key:"_createParallaxImage",value:function _createParallaxImage(container,image,size){var parallaxElement=container.ownerDocument.createElement("div");parallaxElement.classList.add("sunmedia-parallax-container");var parallaxImage=container.ownerDocument.createElement("div");parallaxImage.classList.add("sunmedia-parallax-img");parallaxElement.style.width="100%";parallaxElement.style.height="100%";parallaxElement.style.position="absolute";parallaxElement.style.top="0";parallaxElement.style.left="0";parallaxElement.style.overflow="hidden";parallaxElement.style.zIndex="1";parallaxElement.style.pointerEvents="none";parallaxElement.style.backgroundRepeat="repeat-y";parallaxElement.style.backgroundAttachment="fixed";parallaxElement.style.webkitClipPath="inset(1px 0px)";parallaxElement.style.mozClipPath="inset(1px 0px)";parallaxElement.style.msClipPath="inset(1px 0px)";parallaxElement.style.oClipPath="inset(1px 0px)";parallaxElement.style.clipPath="inset(1px 0px)";if(false===SMDeviceDetection.isMobile()){parallaxElement.style.backgroundImage="url("+image.src+")"}parallaxImage.style.width="100%";parallaxImage.style.height=size.height+"px";parallaxImage.style.position="fixed";parallaxImage.style.top="0";parallaxImage.style.left="0";parallaxImage.style.backgroundImage="url("+image.src+")";parallaxImage.style.backgroundRepeat="repeat-y";var responsiveImageHeight=image.naturalHeight*size.width/image.naturalWidth;var center=(size.height-responsiveImageHeight)/2;var self=this;var offsetLeft=Math.round(self._getStackedOffsetLeft(container));offsetLeft=offsetLeft>=0?offsetLeft:0;if(false===SMDeviceDetection.isMobile()){parallaxElement.style.backgroundPosition="".concat(offsetLeft,"px ").concat(center,"px");parallaxElement.style.backgroundSize="".concat(Math.round(size.width),"px ").concat(Math.round(responsiveImageHeight),"px")}else{parallaxImage.style.backgroundPosition="".concat(offsetLeft,"px ").concat(center,"px");parallaxImage.style.backgroundSize="".concat(Math.round(size.width),"px ").concat(Math.round(responsiveImageHeight),"px");parallaxElement.appendChild(parallaxImage)}return{parallaxElement:parallaxElement,parallaxImage:parallaxImage,initialImage:image}}},{key:"updateParallax",value:function updateParallax(image,container,window){var initial=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if(!container){return null}var size={width:this.getAdWidth()||config.width,height:window.innerHeight};var self=this;var _ref=true===initial?self._createParallaxImage(container,image,size):image,parallaxElement=_ref.parallaxElement,parallaxImage=_ref.parallaxImage,initialImage=_ref.initialImage;var imageWidth=initialImage.naturalWidth||initialImage.width;var imageHeight=initialImage.naturalHeight||initialImage.height;if(imageWidth===0||imageHeight===0){initialImage.addEventListener("load",function(){self._parallaxes.forEach(function(parallax){self.updateParallax(parallax,parallax.container,parallax.window,false)})})}var responsiveImageHeight=imageHeight*size.width/imageWidth;var center=(size.height-responsiveImageHeight)/2;var offsetLeft=Math.round(self._getStackedOffsetLeft(container));offsetLeft=offsetLeft>=0?offsetLeft:0;if(false===SMDeviceDetection.isMobile()){parallaxElement.style.backgroundPosition="".concat(offsetLeft,"px ").concat(center,"px");parallaxElement.style.backgroundSize="".concat(Math.round(size.width),"px ").concat(responsiveImageHeight,"px")}else{parallaxImage.style.backgroundPosition="".concat(offsetLeft,"px ").concat(center,"px");parallaxImage.style.backgroundSize="".concat(Math.round(size.width),"px ").concat(responsiveImageHeight,"px")}if(true===initial){var iframes=container.getElementsByTagName("iframe");if(iframes.length>0){container.insertBefore(parallaxElement,iframes[0])}else{container.appendChild(parallaxElement)}}return{parallaxElement:parallaxElement,parallaxImage:parallaxImage,initialImage:initialImage}}},{key:"adLoaded",value:function adLoaded(){this.ssploaded=true;var self=this;var iframe=this.iframe.contentWindow||this.iframe.contentDocument;iframe.document.body.style.margin="0";var iframeSize=this.getIframeSize();this.scroller=this._isInDisplayScroller(iframe.document);if(this.scroller){iframeSize.w=640;iframeSize.h=360;this._parallax(this.scroller)}if(!this.adPausable){var nEvent=new SMEvent(Math.round(this.adDuration),function(){if(self.removeScroller)self.removeScroller()});this.eventManager.add(nEvent)}_get(_getPrototypeOf(SMAdSspController.prototype),"adLoaded",this).call(this)}},{key:"showCloseButton",value:function showCloseButton(){var self=this;var closeButtonElement=this.createCloseButton();if(this.scroller){closeButtonElement.style.zIndex=1;var container=self._SMContainer||this.adContainer;container.appendChild(closeButtonElement)}else{this.adContainer.appendChild(closeButtonElement)}}},{key:"resizeAd",value:function resizeAd(width,height,viewMode){if(this.scroller){var self=this;this._parallaxes.forEach(function(parallax){self.updateParallax(parallax,parallax.container,parallax.window,false)})}else _get(_getPrototypeOf(SMAdSspController.prototype),"resizeAd",this).call(this,width,height,viewMode)}}]);_inherits(SMAdSspController,_SMAdHeaderBiddingCon);return SMAdSspController}(SMAdHeaderBiddingController);window.SMAdController=new SMAdSspController;var getVPAIDAd=function getVPAIDAd(){return window.SMAdController};